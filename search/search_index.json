{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to GNPS2 Documentation","text":"<p>GNPS2 is a web-based mass spectrometry analysis platform. GNPS2 aids in identification and discovery of new molecules in small molecule and natural products mass spectrometry data. </p> <p>As there are many aspects to GNPS, it can be a bit overwhelming. Here is a quick description of main functionalities:</p> <ol> <li>Computational Workflows for the Analysis of Mass Spectrometry Data</li> <li>Interactive Visualizations of Mass Spectrometry Data and Results</li> <li>Mass Spectrometry Knowledgebase Curation</li> <li>Big Data Integration and Visualization</li> </ol>"},{"location":"accounts/","title":"Accounts","text":""},{"location":"accounts/#account-creation","title":"Account Creation","text":"<p>To create an account, you'll need to reach out to Ming to get an signup token. Once you have a token, please create an account here.</p> <p>GNPS2 is in closed beta to make sure everything is working properly and is slowly ramping up for community use. </p> <p>Thank you for your patience!</p>"},{"location":"agilent_conversion/","title":"Agilent","text":"<p>This is the conversion for Agilent.</p>"},{"location":"agilent_conversion/#msconvert-and-gnps2","title":"MSConvert and GNPS2","text":"<p>One of the key issues with Agilent software converted with MSConvert, is that the MSConvert makes the scans non-sequential. Molecular Networking does not like this, so we have created a workflow in GNPS2 that renumbers the MS scans so that it is sequential. The general process involves this:</p> <ol> <li>Convert the Agilent data with MSConvert</li> <li>Upload the data to GNPS2</li> <li>Run the Agilent Conversion workflow</li> <li>Run the Classical Molecular Networking workflow in GNPS2.</li> </ol>"},{"location":"agilent_conversion/#agilent-software-qual","title":"Agilent Software - Qual","text":"<p>We can also do export directly from Agilent software.</p> <p>TODO: Finish this</p>"},{"location":"agilent_fbmn/","title":"Agilent","text":""},{"location":"agilent_fbmn/#feature-finding-in-agilent-software","title":"Feature Finding in Agilent Software","text":"<p>The first step is...</p>"},{"location":"agilent_fbmn/#analysis-in-gnps2","title":"Analysis in GNPS2","text":"<p>You can use the FBMN workflow in GNPS2. </p> <p>Be sure to select the AGILENT2 for the Feature Finding Tool.  </p>"},{"location":"api/","title":"API","text":""},{"location":"api/#chemicalstructurewebservice","title":"ChemicalStructureWebService","text":"<p>Web Server for Chemical Structure pictures as well as other chemical structure things</p>"},{"location":"api/#web-api-endpoints","title":"Web API Endpoints","text":"<p>Full resolution of all structural information conversion</p> <p><code>https://structure.gnps2.org/convert?smiles=CCO</code></p> <p>InChI Conversion</p> <p><code>https://structure.gnps2.org/inchi?smiles=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p> <p>InChIKey Conversion</p> <p><code>https://structure.gnps2.org/inchikey?smiles=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p> <p>Smiles Conversion</p> <p><code>https://structure.gnps2.org/inchikey?smiles=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Mol Conversion</p> <p><code>https://structure.gnps2.org/mol?smiles=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>ClassyFire</p> <p><code>https://structure.gnps2.org/classyfire?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Formula</p> <p><code>https://structure.gnps2.org/formula?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Structure Mass</p> <p><code>https://structure.gnps2.org/structuremass?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code> <code>https://structure.gnps2.org/structuremass?formula=C8H10N4O2</code></p> <p>Structure Fingerprint</p> <p><code>https://structure.gnps2.org/structurefingerprint?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Image Creation</p> <p><code>https://structure.gnps2.org/structureimg?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Structure Similarity</p> <p><code>https://structure.gnps2.org/structuresimilarity?inchi1=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3&amp;smiles2=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p>"},{"location":"api/#fast-search","title":"Fast Search","text":"<p>Rapidly search pre-made libraries GNPS and MassIVE spectral data. Search by peaks in json format using query_spectrum:</p> <pre><code>https://fasst.gnps2.org/search?usi=None&amp;precursor_mz=981.54&amp;charge=1&amp;library=gnpslibrary&amp;query_spectrum={%22n_peaks%22:15,%22peaks%22:[[165.06979370117188,0.38009798526763916],[167.072998046875,1.7413330078125],[179.07260131835938,0.2999509871006012],[180.08079528808594,100.0],[181.08859252929688,2.8455820083618164],[182.09649658203125,23.914995193481445],[192.08079528808594,0.6896359920501709],[193.0886993408203,0.2419929951429367],[208.07569885253906,3.9236950874328613],[210.09129333496094,51.83255386352539],[236.0706024169922,4.025279998779297],[253.09719848632812,21.652437210083008],[254.08120727539062,46.069068908691406],[255.0872039794922,0.3038550019264221],[271.1077880859375,0.7285820245742798]],%22precursor_charge%22:0,%22precursor_mz%22:271.1077}\n</code></pre> <p>Search by USI:</p> <pre><code>https://fasst.gnps2.org/search?library=gnpslibrary&amp;usi=mzspec:GNPS:GNPS-LIBRARY:accession:CCMSLIB00000001547\n</code></pre> <p>Parameters: - usi (mutually exclusive with query spectrum) - library: The pre-built library index, options are listed on the Fast Search GUI - analog: [Yes/No], Defaults to \"No\" - cache: [Yes/No], Defaults to \"No\" - lower_delta: defaults to 130 - upper_delta: defaults to 200 - pm_tolerance (Da): The tolerance for precursor mass matching in daltons, defaults to 0.05 - fragment_tolerance (Da): The tolerance for matching individual peaks in daltons, defaults to 0.05 - cosine_threshold: The minimum cosine threshold to be included in the results, defaults to 0.7 - query_spectrum (mututally exclusive with USI): A json formatted peak list</p>"},{"location":"api/#public-dataset-files","title":"Public Dataset Files","text":"<p>Access spectral data by USI or SpectrumID Getting all files per dataset</p> <pre><code>https://explorer.gnps2.org/api/datasets/{accession}/files\n</code></pre> <p>Getting file path per USI</p> <pre><code>https://dashboard.gnps2.org/downloadlink?usi={file usi}\n</code></pre> <p>Getting spectrum data from Spectrum ID</p> <pre><code>https://external.gnps2.org/gnpsspectrum?SpectrumID={Spectrum ID}\n</code></pre> <p>JSON Peak List from USI</p> <pre><code>https://fasst.gnps2.org/search?library=gnpslibrary&amp;usi={file usi}\n</code></pre> <p>JSON Peak List from USI (Example):</p> <pre><code>https://fasst.gnps2.org/search?library=gnpslibrary&amp;usi=mzspec:GNPS:GNPS-LIBRARY:accession:CCMSLIB00000001547\n</code></pre>"},{"location":"chemwalker_doc/","title":"ChemWalker workflow documentation","text":"<p>Chemwalker is a tool published by R. da Silva lab to annotate features in metabolomic networks by propagating annotations on non-directly connected nodes by using MetFrag. The article is published here and the source code is available in github.  A detailed explanation of the tool is found below. </p>"},{"location":"chemwalker_doc/#quick-tutorial-of-chemwalker-workflow","title":"Quick tutorial of chemwalker workflow","text":""},{"location":"chemwalker_doc/#input","title":"Input","text":"Parameter Description Default Required Job Description Label for the ChemWalker job to identify it by the user. no GNPS task ID GNPS molecular networking task id. Identify the task id of your FBMN job in GNPS2. See the links to the jobs in GNPS and GNPS2. yes Workflow type FBMN or Classic (V2) from GNPS and FBMN from GNPS2, named GNPS2. If the GNPS server is down, the chemwalker task will not work for FBMN or Classic (V2) since it needs to retrieve the data from GNPS. Analogously with GNPS2. GNPS2 yes Component Index Index of a connected component of interest in a Molecular Network. The propagation is limited to the connected component. Zero will perform propagation inside all components. yes Ionization mode Mass spectrometry acquisition mode. Positive yes Adduct ion type Expected adduct type for the precursor ion mass. It should be consistent with the ionization mode, otherwise the workflow will fail. [M+H]+ yes PPM tolerance (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 yes Structure databases The default natural products database is the COCONUT database or in house candidate structure database. See the Structure Database section. COCONUT.psv yes <p>The fields are presented in the image. Bold fields are mandatory: </p>"},{"location":"chemwalker_doc/#links-to-task-ids","title":"Links to task ids","text":"<p>The information from the molecular network is necessary to annotate the nodes (features). For that, chemwalker needs the job id of the molecular network task. To view the task_id, check the red rectangle in the image. The task id can correspond to a GNPS2 Feature based molecular networking (FBMN), to a GNPS FBMN or a GNPS Molecular Networking v2. </p>"},{"location":"chemwalker_doc/#example-input","title":"Example Input","text":"# Information Value 1. Task description User label to identify the workflow task 2. GNPS2, FBMN, or FBMNv2 task id b6d12e1e42b64ad6b20e7d38d5a4214b 3. Workflow type (GNPS2, FBMN or V2) GNPS2 4. Component (Molecular family) index 11 5. File selection LIBRARYLOCATION/STRUCTURE/Chemwalker/COCONUT.psv"},{"location":"chemwalker_doc/#output","title":"Output","text":"# Item Description 1. Log Text area Text area with the result of the task. If there is some failure, the log will be written there. If the task failed and you want to contact the support team, please provide the output of this text area along with the job id. 2. Full results from the job Full results from the job. It can provide information to debug or to users with programming knowledge. 3. random walk structures.tsv File with the annotations over the nodes in the selected network/s. You can download to see the full fields or visit the online version. For a full analysis, the download of the file is recommended. 4. random walk structures.graphml Graphml with the annotations to visualize the nodes in Cytoscape. You can import this data file and dynamically analyze it there. <p>The different parts of the output are presented in the image: </p>"},{"location":"chemwalker_doc/#example-task","title":"Example task","text":"<p>To test the functionality of the ChemWalker workflow an Example task can be visited, and this work can be reproduced by clicking the clone button: </p> <p></p>"},{"location":"chemwalker_doc/#example-output","title":"Example output","text":"<p>The result of the task is the annotation of compounds from the chosen database according to the in-silico fragmentations calculated by MetFrag. The cluster index is the identification of the feature, the score is the associated score for the corresponding annotation for that specific feature. Results are sorted according to cluster index and score. The online results are not complete, it is recommended to download the full table. </p> <p> </p> <p>The user can download the graphml with the new nodes annotated by chem Walker, and now each node in the network contains the annotation calculated by ChemWalker. </p> <p> </p>"},{"location":"chemwalker_doc/#full-tutorial-of-chemwalker","title":"Full tutorial of ChemWalker","text":"<p>ChemWalker is a python package to propagate spectral library match identities through candidate structures provided by in silico fragmentation, using random walk.</p> <p></p> <p>Check out the package's documentation.</p>"},{"location":"chemwalker_doc/#structure-database","title":"Structure database","text":"<p>There are basically three options for database structure selection:</p> <ol> <li>The default natural products database is the COCONUT database. </li> <li>Input an in house generated database.  A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as: </li> </ol> <p>Having an in house collection, the user has to first format the database, using the following webserver:</p> <p></p> <p>After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as:</p> <p></p>"},{"location":"chemwalker_doc/#chemwalker-visualization-in-cytoscape","title":"ChemWalker Visualization in Cytoscape","text":"<p>In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output <code>Random walk strtuctures graphml</code> available at the results page.</p> <p>Cytoscape (we have used version &gt;= 3.4) is available for download from here. </p>"},{"location":"chemwalker_doc/#download-chemwalkers-cytoscape-files","title":"Download ChemWalker's Cytoscape files","text":"<p>To download the Cytoscape file, go back to the results page of your task:</p> <p></p> <p>After the download, remember to uncompress the file for downstream use.</p>"},{"location":"chemwalker_doc/#installing-the-chemviz-plugin","title":"Installing the ChemViz plugin","text":"<p>To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below:</p> <p></p>"},{"location":"chemwalker_doc/#load-chemwalkers-cytoscape-file-and-apply-layout","title":"Load ChemWalker's Cytoscape file and apply layout","text":"<p>Load the graphml file and apply a layout to spread the nodes:</p> <p></p>"},{"location":"chemwalker_doc/#change-image-display-properties-and-paint-library-match-structure","title":"Change image display properties and paint library match structure","text":"<p>The graphml file contains some pre-set elements to aid structure display. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the column SMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing:</p> <p></p> <p>After setting the desired source column to display the structure one can just 'paint' the structure on the node:</p> <p></p>"},{"location":"chemwalker_doc/#display-the-list-of-candidates","title":"Display the list of candidates","text":"<p>The most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters:</p> <p></p>"},{"location":"chemwalker_doc/#citation","title":"Citation","text":"<p>Tiago Cabral Borelli, Gabriel Santos Arini, Lu\u00eds G P Feitosa, Pieter C Dorrestein, Norberto Peporine Lopes, Ricardo R da Silva. Improving annotation propagation on molecular networks through random walks: introducing ChemWalker. Bioinformatics 2023, 39(3), btad078.</p>"},{"location":"chemwalker_doc/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"classical/","title":"Classical Molecular Networking","text":""},{"location":"classical/#data-files-selection","title":"Data Files Selection","text":"<p>There are two ways you can select files in GNPS2 for Classical Molecular Networking. </p> <ol> <li>Selection of Files uploaded to GNPS2</li> <li>Selection of public files via USI</li> </ol>"},{"location":"classical/#selection-of-public-files-via-usi","title":"Selection of Public Files via USI","text":"<p>Universal Spectrum Identifiers are a method to reference single spectra in public repositories. Here in GNPS2, we also use the prefix to identify full files themselves. </p> <p>You can get the USI for a file using the GNPS2 Dataset Explorer. </p> <p>Once you have gotten the USIs for the set of files you want to analyze, paste it into the \"USI Files to Analyze\" field. Data will automatically be downloaded and made available for analysis. </p>"},{"location":"community/","title":"Join the GNPS2 community","text":"<p>The GNPS2 community is always welcoming suggestions and contributions. Be part of the community and contribute!</p>"},{"location":"community/#gnps-forum","title":"GNPS Forum","text":"<p>Discussions and suggestions can also take place on the GNPS/GNPS2 forum at https://groups.google.com/forum/#!forum/molecular_networking_bug_reports.</p>"},{"location":"community/#updating-the-gnps2-documentation-quick","title":"Updating the GNPS2 Documentation (Quick)","text":"<p>We'd love for the community to add, edit, and improve the documentation so it'll be even more helpful for everyone. You can even see all the contributors for each page at the bottom, so it's totally a community effort. To make things simpler, here is the step by step on how to edit the documentation. </p> <p>Make a GitHub Account </p> <p>You'll need to make a GitHub Account.</p> <p>Click Edit Button on Page You Want to Edit</p> <p></p> <p>Fork the Repository When Prompted (only the first time)</p> <p></p> <p>Make the Edits in MarkDown</p> <p></p> <p>Propose Changes</p> <p>Please describe the change you are making. </p> <p></p> <p>Create Pull Request</p> <p></p> <p>Finalize Pull Request with Description</p> <p></p>"},{"location":"community/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"contact/","title":"Contact/Office Hours","text":""},{"location":"contact/#gnps2-workflow-contact-information","title":"GNPS2 Workflow Contact information","text":"<p>If you have any questions about how to use GNPS2 please first ask the community at the GNPS forum located here.</p>"},{"location":"contact/#gnps2-office-hours","title":"GNPS2 Office Hours","text":"<p>We are hosting online office hours on a weekly basis online with Ming (mingxun.wang@cs.ucr.edu, Lab Website) via Zoom:</p> <p>https://ucr.zoom.us/j/98049645231</p> <p>In office hours we'll cover new and old features of GNPS2 and most importantly we'll take your personal questions about GNPS2, computational mass spectrometry, and any science you want to chat about! We'll start office hours given the time below and keep going until there are no more questions. If office hours get too busy, we will limit each question to 10 min.  </p> <p>Upcoming Office Hour Schedule</p> Date/Time Subjects Covered 9AM PST (6PM CET) Weekly on Tuesday Interactive Office Hours <p>NOTE: The times of GNPS2 office hours are subject to change each quarter as Ming's teaching schedule shifts. Please check the week of to not be blindsided by any changes. </p> <p>Please also take the time to RSVP that you're going to attend and what questions you may have so we know who to let in as well as what to expect and the order to address (you will not receive a confirmation from this RSVP, just show up to office hours once you add it):</p> Loading\u2026"},{"location":"contact/#page-contributions","title":"Page Contributions","text":"<p>{{ git_page_authors }}</p>"},{"location":"fileconversion/","title":"File Conversion","text":"<p>Supported Formats at GNPS2</p> <p>GNPS2 supports mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If some of your files are in these formats, please use the following guide to convert them to open formats supported by GNPS2.</p>"},{"location":"fileconversion/#data-conversion-super-easy","title":"Data Conversion (Super Easy)","text":"<p>Drag and drop files on our server here and hit convert. </p> <p>You will receive a download of all the converted files in a zip file that is ready to be analyzed! </p>"},{"location":"fileconversion/#data-conversion-easy","title":"Data Conversion (Easy)","text":"<p>This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzML or legacy mzXML). It is as easy as putting files into a folder and batch converting them all without any installation (well nearly so).</p> <ol> <li>Download the zip file here</li> <li>Unzip contents onto a folder on your computer (e.g. Desktop)</li> <li>Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here</li> <li>Put vendor formats in \"Input_Files\" not embedded in other folders</li> <li>Double click on Double-Click_To-Convert.bat - Download zip includes demo files for major vendor formats as a test.</li> <li>Wait patiently</li> <li>Check all the converted files in Output_Folder</li> <li>If there are errors, please check log.txt or read on how to convert files in a more traditional manner.</li> </ol>"},{"location":"fileconversion/#data-conversion-traditional","title":"Data Conversion (Traditional)","text":"<p>The .mzXML or .mzML formats are strongly preferred and will be discussed below.</p> Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA See more informations about the procedure in this Water Technology Brief Shimadzu .lcd MSConvert <p>For problems with MSConvert, please contact the ProteoWizard developers.</p> <p>If you are a vendor and think there are better methods to convert your files to work with GNPS2, let us know by contacting us.</p>"},{"location":"fileconversion/#conversion-with-msconvert","title":"Conversion with MSConvert","text":"<p>Download and install ProteoWizard from here.</p> <p>Info</p> <p>Make sure to choose a Windows-compatible version (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed.</p> <p>After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert.</p> <ul> <li> <p>Click Browse and select file(s) for conversion. Then click Add to add them to the MSConvert workflow.</p> </li> <li> <p>Choose an Output Directory</p> </li> <li> <p>Under Options, choose mzML (prefered) or mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression.</p> </li> <li> <p>Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-2. Click Add to add the filter.</p> </li> </ul> <p>???+ danger Peak Peaking Filter Order     Make sure the PeakPicking filter is the first filter in the list (top position), otherwise the conversion will not be centroided!     </p> <ul> <li> <p>Save the parameters for the next conversion. This will save you some time and prevent misconfiguration. In Presets (left bottom), click on Save Presets, and select \"Save as default for the format\".</p> </li> <li> <p>Click on Start.  Check your folder for the new .mzML/.mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS).</p> </li> </ul>"},{"location":"fileconversion/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"fileupload/","title":"File Upload","text":""},{"location":"fileupload/#browser-file-uploads","title":"Browser File Uploads","text":"<p>Go ahead and login and click the \"File Broswer\" in the top right. You will be able to drag and drop. However, be warned that you cannot upload files directly to the root of your user. You will need to make a new folder first. </p>"},{"location":"fileupload/#sftp-file-uploads","title":"SFTP File Uploads","text":"<p>You can access the SFTP file upload with the following information</p> Field Value hostname sftp.gnps2.org port 6542 <p>You can login with your GNPS2 username and password. </p> <p>NOTE: This is currently in beta and not all accounts are activated on the SFTP server. </p> <p>Here is a one-liner if you like using the commandline for uploading a folder</p> <pre><code>sftp -P 6542 &lt;username&gt;@sftp.gnps2.org:/ &lt;&lt;&lt; $'put -r &lt;folder name&gt;'\n</code></pre> <p>If you want to mirror a lot of data periodically, use this command:</p> <pre><code>lftp -e \"mirror --parallel=4 --include '/*.mzML' -R $local_directory $remote_directory; quit\" -u \"$remote_user,$password\" sftp://$remote_host:$remote_port\n</code></pre>"},{"location":"fileupload/#ftp-file-uploads","title":"FTP File Uploads","text":"<p>If you want to upload with FTP because SFTP is blocked or has issues at your institution or computer, you can use the following information</p> Field Value hostname ftp.gnps2.org port 6541"},{"location":"gnpsdatasetexplorer/","title":"GNPS2 Dataset Explorer","text":"<p>The GNPS2 Dataset Explorer is a simple interface to enable users to list out and select all files from a public dataset or analysis task. </p> <p>It current supports the following data sources:</p> <ol> <li>MassIVE Public Datasets</li> <li>GNPS Public Datasets</li> <li>Metabolights Public Datasets</li> <li>Metabolomics Workbench Public Datasets</li> <li>GNPS Analysis Data Files (LC and GC)</li> <li>PRIDE Proteomics Public Datasets</li> <li>ProteomXchange Public Datasets</li> </ol>"},{"location":"gnpsdatasetexplorer/#listing-dataset-files","title":"Listing Dataset Files","text":"<p>Once you have entered an accession, a set of files will appear in the table. You may select one or more files to visualize. You can select \"Visualize Files\" below to see them in the GNPS2 Dashboard of the underlying raw data. Or you can choose to network them in GNPS2 by clicking \"Molecular Network Files at GNPS2\". </p> <p>Note</p> <p>You may select to visualize all files if you do not want to select them. It is limited to the first 50 in the table, so if you filter the table, the it will trim down this 50. </p>"},{"location":"gnpsdatasetexplorer/#metadata","title":"Metadata","text":"<p>We attempt to gather metadata from several sources for public mass spectrometry data in MassIVE/GNPS. </p> <ol> <li>Default (MS information from run)</li> <li>ReDU</li> <li>MassIVE Metadata Uploads</li> <li>Metabolights Study Information</li> </ol>"},{"location":"gnpsdatasetexplorer/#listing-gnps-tasks","title":"Listing GNPS Tasks","text":"<p>The Dataset Explorer will list out all the files selected in the GNPS analysis and attempts to pull in the metadata from the analysis as well. </p>"},{"location":"gnpsdatasetexplorer/#comparing-two-files-for-lcms-viewer","title":"Comparing Two Files for LCMS Viewer","text":"<p>There are two tables with identical entries right above/below one another. This enables easily to select two sets of files to visualize in the GNPS2 Dashboard. Simply put a check mark next to the files in each table you want to compare and select the \"Visualize Files\" button below. </p>"},{"location":"gnpsdatasetexplorer/#server-selection-feature","title":"Server Selection Feature","text":"<p>We are excited to introduce our new server selection to the Dataset Explorer, giving users more control over their experience. This feature allows users to choose the server location of the dashboard, providing more flexibility and improving overall performance.</p>"},{"location":"gnpsdatasetexplorer/#server-status","title":"Server status","text":"<p>Currently we are supporting two locations where users can choose from:</p> <ol> <li>UCR Riverside, America</li> <li>University of T\u00fcbingen, Germany </li> </ol> <p>Detailed server status are shown below:</p> Server Status GNPS2 - USA-UCR US Server GNPS2 - DE-Tue DE Server <p>Feel free to share about your experiences with the new server selection and help us improving it further!</p>"},{"location":"idbac/","title":"IDBac Database Submission and Analysis","text":""},{"location":"idbac/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p>","text":""},{"location":"idbac/#idbac-workflows-require-a-mzml-file-format-for-guidance-on-how-to-convert-raw-data-or-mzxml-to-mzml-see-the-tabs-to-the-left","title":"*IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.","text":"<p>## 1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzmL files, plate map and metadata sheet.</p> <p></p> <p></p>"},{"location":"idbac/#3-split-re-name-autoexecute-file","title":"3) Split re-name autoexecute file <p>This workflow will split your autoexecute data into individually labeled mzML files based on your plate map and well positions. </p> <p>i) Open the idbac_split_maldi workflow</p> <p>ii) Select your autoExecute mzML and plate map from the drop down menu.</p> <p>iii) Submit workflow.</p> <p></p>","text":""},{"location":"idbac/#4-choose-what-you-would-like-to-do-next","title":"4) Choose what you would like to do next: <p>a) IDBac Analysis: Analyze spectra within your dataset indepedently, or compare against the IDBac protein database (See \"Analysis options\" below).</p> <p>b) IDBac Protein Database Deposition: Deposit metadata and spectra of genetically verified isolates into the IDBac database.</p> <p></p>","text":""},{"location":"idbac/#a-idbac-analysis","title":"a) IDBac Analysis <p>Submit workflow: Select idbac_analysis_workflow and reference the following image for submission instructions. <p>*If you do not submit metadata during this step, you will have fewer analysis options.</p> <p></p> <p>Analysis options: Once the idbac_analysis_workflow is complete, you have the ability to analyze your data through: <p>i) Vizualize protein dendrogram: View a dendrogram of your isolates (excluding database seeds). </p> <p>ii) Visualize with Metadata: If you selected a metadata column to display, it will appear within this protein dendrogram. If you do not select a metadata column to display, a 500 server error will display on-screen should you choose this analysis.</p> <p>iii) Spectra summary: This option allows you to compare mirror plots of your spectra.</p> <p>iv) Dendrogram similarity: You may view similarity scores between your isolates based on the similarity metric you chose in the analysis workflow submission.</p> <p>v) Database Search Summary: Here you query protein spectra of your unknown isolate against our database of characterized bacterial strains (based on similairty scores).</p> <p></p>","text":""},{"location":"idbac/#b-idbac-database-deposition","title":"b) IDBac Database Deposition <p>Submit workflow: Select idbacdeposition_workflow and reference the following image for deposition instructions. <p></p> <p>View Database <p>To view your deposition, visit the IDBac Knowledgebase.</p>","text":""},{"location":"idbacanalysis/","title":"IDBac Analysis","text":""},{"location":"idbacanalysis/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p> <p>IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.</p>","text":""},{"location":"idbacanalysis/#1-upload-mzml-files-to-gnps2org","title":"1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzML files, plate map and metadata sheet.</p> <p></p> <p></p>","text":""},{"location":"idbacanalysis/#2-submit-analysis-workflow","title":"2) Submit Analysis workflow: <p>Select idbac_analysis_workflow and reference the following image for submission instructions.</p> <p>You may submit metadata within this workflow, or on the Interactive IDBac Analysis interface</p> <p></p>","text":""},{"location":"idbacanalysis/#3-analysis-options","title":"3) Analysis options: <p>Once the idbac_analysis_workflow is complete, you have the ability to analyze your data through:</p> <p>i) Interactive IDBac Analysis: Choose parameters and visually analyze your dataset. See section below for more details.</p> <p>ii) Database Search Summary: Compare protein spectra of your unknown isolate against our database of characterized bacterial strains and obtain similarity scores.</p> <p></p>","text":""},{"location":"idbacanalysis/#i-interactive-idbac-analysis","title":"i) Interactive IDBac Analysis <p>See images below for more detail</p> <p>a) If you did not include a metadata spreadsheet during the workflow submission, you may upload the file here.</p> <p>b) Choose your preferred parameters for dendrogram visualization.</p> <p>c) Select how database hits will be displayed in the dendrogram. </p> <p>d) If you would like to remove isolates from your dataset, you may do so here. </p> <p>e) You can choose a dendrogram cut-height and/or display dendrogram distance values for each isolate. </p> <p>f) Your dendrogram will be displayed according to the parameters set above. Note: Database strains will be labeled as 'DB'.</p> <p>g) Visualize a single spectrum or compare two spectra via a mirror plot. </p> <p>h) URL link to easily share this analysis page.</p> <p></p> <p></p> <p></p> <p></p>","text":""},{"location":"idbacanalysis/#ii-database-search-summary","title":"ii) Database Search Summary","text":""},{"location":"idbacdepositions/","title":"IDBac Database Deposition","text":""},{"location":"idbacdepositions/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p> <p>*IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.</p> <p>*All database depositions must have either an accompanying accession number or 16S taxonomy assignment and sequence.</p>","text":""},{"location":"idbacdepositions/#1-upload-mzml-files-to-gnps2org","title":"1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzmL files, plate map and metadata sheet.</p> <p></p> <p></p>","text":""},{"location":"idbacdepositions/#2-submit-workflow","title":"2) Submit workflow: <p>Select idbacdeposition_workflow and reference the following image for deposition instructions.</p> <p></p>","text":""},{"location":"idbacdepositions/#3-view-database","title":"3) View Database <p>To view your deposition, visit the IDBac Knowledgebase.</p>","text":""},{"location":"idbacmzxmlconversion/","title":"Convert mzXML to mzML","text":""},{"location":"idbacmzxmlconversion/#1-upload-mzxml-files-to-gnps2org","title":"1) Upload mzXML files to GNPS2.org","text":"<p>i) Select \"File Browser\" found on the GNPS2.org homepage.</p> <p>ii) Create a new folder and upload the mzXML files that need conversion. </p> <p> </p>"},{"location":"idbacmzxmlconversion/#2-run-the-msconvert_workflow","title":"2) Run the msconvert_workflow  <p>i) Select the mzXML files that you would like to convert to mzML from the drop down menu.</p> <p>ii) Submit workflow.</p> <p>iii) The output of this workflow is individual mzML files that can be used in downstream IDBac analysis or database depositions. </p> <p></p>","text":""},{"location":"idbacmzxmlconversion/#3-choose-what-you-would-like-to-do-next","title":"3) Choose what you would like to do next: <p>a) IDBac Analysis: Analyze spectra within your dataset indepedently, or compare against the IDBac protein database (See \"IDBac Analysis\" tab).</p> <p>b) IDBac Protein Database Deposition: Deposit metadata and spectra of genetically verified isolates into the IDBac database (See \"IDBac Database Depositions\" tab).</p> <p></p>","text":""},{"location":"idbacrawconversion/","title":"1) Convert raw Bruker data to mzML via MSConvert.","text":""},{"location":"idbacrawconversion/#open-msconvert-and-proceed-to-the-following-steps","title":"Open MSConvert and proceed to the following steps.","text":"<p>i) Select your Bruker FID file(s) by clicking 'Browse'.</p> <p>ii) Click 'Add' to submit your file to the conversion cue.</p> <p>iii) Select where you would like your file to be saved under \"Output Directory\".</p> <p>iv) Ensure mzML is selected under 'Options/Output format'.</p> <p>v) When the previous steps are completed, click 'Start'.</p> <p>vi) The output of this conversion will be a single autoexecute mzML for the entire plate or single mzML files for each well. These files will be re-named and replicates will be merged within the \"Idbac_split_maldi_workflow\" section below.</p> <p></p> <p></p> <p></p>"},{"location":"idbacrawconversion/#2-upload-mzml-files-to-gnps2org","title":"2) Upload mzML files to GNPS2.org","text":"<p>i) Select \"File Browser\" found on the GNPS2.org homepage.</p> <p>ii) Create a new folder and upload your converted files.</p> <p></p> <p></p>"},{"location":"idbacrawconversion/#3-split-re-name-autoexecute-file","title":"3) Split/ re-name autoexecute file","text":"<p>For Autoexecute mzML: This workflow will split your autoexecute data into individually labeled mzML files based on your plate map and well positions.</p> <p>For manual collection mzML: This workflow will re-name your mzML files based on your plate map and well positions.</p> <p>i) Open the idbac_split_maldi workflow</p> <p>ii) Select your autoExecute mzML and plate map from the drop down menu.</p> <p>iii) Submit workflow.</p> <p></p>"},{"location":"idbacrawconversion/#4-choose-what-you-would-like-to-do-next","title":"4) Choose what you would like to do next: <p>a) IDBac Analysis: Analyze spectra within your dataset indepedently, or compare against the IDBac protein database (See \"IDBac analysis\" tab).</p> <p>b) IDBac Protein Database Deposition: Deposit metadata and spectra of genetically verified isolates into the IDBac database (See \"IDBac Depositions\" tab).</p> <p></p>","text":""},{"location":"logo/","title":"Logos","text":"<p>Feel free to use any of the following logos for your presentations. The following logos are licensed as CC BY.</p> <p></p>"},{"location":"logo/#gnps2","title":"GNPS2","text":""},{"location":"logo/#microbemasst","title":"microbeMASST","text":""},{"location":"ms2query_doc/","title":"MS2Query workflow documentation","text":"<p>MS2Query is a tool published by N. De Jonge et al. for annotating MS2 spectra, by finding the best match in mass spectral libraries. What makes MS2Query unique is that it will also return analogues if no good exact match is available. An analgoue is a metabolite that is chemically very similar to your metabolite, but can have some modifications. Analogues can be a great starting point for annotation, or can help you to prioritize metabolites/spectra for further analysis.  Including analogues increases the number of spectra for which you get some results by a lot, thereby making it possible to learn more from your data!</p> <p>MS2Query gives more results and more reliable predictions compared to previous methods for library matching, like (modified) cosine score or MS2Deepscore.  MS2Query uses previously developed machine learning algorithms (MS2Deepscore and Spec2Vec) to predict chemical similarity between your spectra and library spectra.  MS2Query is able to improve the reliability of the predicitons a lot by not directly picking the highest predicted similarity, but looking at many predictions for similar library metabolites first, to make sure the potential match is not a false positive.  More details about how this was implemented and the benchmarking results can be found in: https://www.nature.com/articles/s41467-023-37446-4 Please cite this article as well if you use MS2Query. </p> <p>The code of MS2Query is fully open source and can be found on https://github.com/iomega/ms2query  Here you can also read how you can easily run MS2Query locally from the command line. </p>"},{"location":"ms2query_doc/#quick-tutorial-of-ms2query-workflow","title":"Quick tutorial of MS2Query workflow","text":""},{"location":"ms2query_doc/#input","title":"Input","text":"Parameter Description Default Required Job Description Label for the MS2Query job to identify it by the user. no Spectra files Provide a file with ms/ms spectra. Allowed formats are mzML, json, mgf, msp, mzxml or usi. Those files should have been uploaded to GNPS2 See file upload documentation. yes Ionization mode Mass spectrometry acquisition mode. Positive yes Library models MS2Query uses a Random Forest Model to rank the highest scores in similarity spectra. This The users can use their own models. If the user chooses negative ionization mode, change the model to shared/ms2query/negativeim_model. To train your own models, check the github documentation. positiveim_model yes Additional metadata columns from the experimental data The columns will be added to the output file with their corresponding values. The name should match the name on the spectra file. It is case sensitive. retention_time feature_id no <p>The fields are presented in the image. Bold fields are mandatory: </p>"},{"location":"ms2query_doc/#example-input","title":"Example Input","text":"# Information Value 1. Task description User label to identify the workflow task 2. Spectra Files USERUPLOAD/alberto/ms2query/dummy_spectra.mgf 3. Ionization mode Positive 4. Library models USERUPLOAD/shared/ms2query/positiveim_model 5. Additional metadata columns retention_time feature_id"},{"location":"ms2query_doc/#output","title":"Output","text":"# Item Description 1. Log Text area Text area with the result of the task. If there is some failure, the log will be written there. If the task failed and you want to contact the support team, please provide the output of this text area along with the job id. 2. Full results from the job Full results from the job. It can provide information to debug or to users with programming knowledge. 3. MS2Query results.zip Zip file containing the csv file with the annotations. <p>The different parts of the output are presented in the image: </p>"},{"location":"ms2query_doc/#example-task","title":"Example task","text":"<p>To test the functionality of the MS2Query workflow an Example task can be visited, and this work can be reproduced by clicking the clone button: </p> <p></p>"},{"location":"ms2query_doc/#example-output","title":"Example output","text":"<p>The result of the task is the annotation of features present in the MS/MS spectra file. MS2Query assigns a identifier for each spectra annotated, their corresnponding ms2query_model_prediction_score, the delta m/z of the precursor mass, the representation of the structure (InChI Key and SMILES, the metadata columns added by the user and the corresponding class )</p> <p> </p>"},{"location":"ms2query_doc/#interpretation-results","title":"Interpretation results","text":"<p>As output a csv file is returned. For each of your input spectra MS2Query predicts a library match. It is important to check the ms2query_model_prediction column. This column contains a score, which indicates the likelihood that the found match is a good match. This score ranges between 0 and 1, the closer this score is to 1 the more likely that it is a good match/analogue. It is important to use this score to select only the reliable hits, since a prediction is given for each spectrum, regardless of the ms2query score. There is no strict minimum for this score, but the higher the MS2Query model prediction the more likely it is a good match/analogue. It will depend on your research goal, what a good threshold is. If a high recall is important you might want a low threshold and if a high reliability is more important you might want a high threshold. To give a general indication, a score &gt; 0,7 has many good analogues and exact matches. In the range of 0.6-0.7, the results can still be useful, but should be analysed with more caution and results below 0.6 can often best be discarded. </p> <p>MS2Query does not need two different workflows for searching for analogues and searching for exact matches, it automatically selects the most likely library spectra. If it is important to separate potential exact matches from potential analogues for your research question, the column with the precursor mz difference can be used to separate these results, since exact matches should have no precursor mz difference. The columns completely to the right are estimated molecular classes based on the molecular structure of the predicted library molecule, these columns can be used to get a quick overview of the kind of compounds that were found. </p>"},{"location":"ms2query_doc/#citation","title":"Citation","text":"<p>Niek F. de Jonge, Joris J. R. Louwen, Elena Chekmeneva, Stephane Camuzeaux, Femke J. Vermeir, Robert S. Jansen, Florian Huber, Justin J. J. van der Hooft. MS2Query: reliable and scalable MS2 mass spectra-based analogue search. Nature Communications 2023, 14: 1752</p>"},{"location":"ms2query_doc/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"mshub-gc_doc/","title":"MSHub-GC Workflow Documentation","text":"<p>MSHub-GC is a workflow designed for the systematic processing of raw Gas Chromatography-Mass Spectrometry data. The tool consists in a Wide Spectral Alignment and a subsequent deconvolution, enhancing compound identification accuracy.</p>"},{"location":"mshub-gc_doc/#brief-tutorial","title":"Brief tutorial","text":""},{"location":"mshub-gc_doc/#input","title":"Input","text":"Parameter Description Default Required Input Spectra Folder Folder with mass-spectrometry data. The files should have previously been uploaded to GNPS2 yes Time unit Unit associated with the spectrum or chromatogram sec yes <p>The inputs are represented in the image:</p> <p></p>"},{"location":"mshub-gc_doc/#example-input","title":"Example input","text":"Information Value 1. Job description Name given by user to identify task 2. File Selection USERUPLOAD/alberto/mshub-gc 3. Time unit MIN"},{"location":"mshub-gc_doc/#output","title":"Output","text":"Item Description 1. Log Text area Text area with the result of the task. If there is some failure, the log will be written there. If the task failed and you want to contact the support team, please provide the output of this text area along with the job id. 2. Full results from the job Full results from the job. It can provide information to debug or to users with programming knowledge. 3. Quantification table Table containing the quantitative information of each compound. Shows ID and retention time (RT). 4. Cluster summary Table containing information about clusters in the analysis. Shows cluster index, mean retention time (RTMean), balance score and base peak. 5. Deconvolved GCMS file Resulting data from a deconvolution process of the original data. <p>The different outputs are represented in the following image:  </p>"},{"location":"mshub-gc_doc/#example-task","title":"Example task","text":""},{"location":"mshub-gc_doc/#example-outputs","title":"Example outputs","text":"<p>To test the functionality of the mshub workflow an example task can be visited, and can be reproduced by clicking the clone button:</p> <p></p>"},{"location":"mshub-gc_doc/#example-output","title":"Example output","text":"<p>The resulting data from the wide spectral alignment and deconvolution is depicted in two tables and the deconvoluted data. When looking at the quantification table, the row ID identifies the different compounds and RT shows the retention time associated to each of them. Results are sorted according to the row ID and RT.</p> <p></p> <p>The cluster summary shows a cluster index, identifying each cluster, a mean retention time showing the average retention time in that cluster, a base score for each cluster and a base peak, indicating the highest intensity peak within the cluster. Results are sorted by cluster index.</p> <p></p>"},{"location":"quickstart2/","title":"GNPS2 Quickstart2","text":""},{"location":"quickstart2/#fbmn-quickstart2","title":"FBMN Quickstart2","text":"<p>This is the quickstart2 for FBMN in GNPS2. You can access the portal at Quickstart2. </p> <p>You will simply need to upload your quant table, MS/MS spectra, and optionally the metadata file. </p>"},{"location":"status/","title":"Server Status","text":"<p>Here we can see the status of the GNPS2 Infrastructure ecosystem. </p>"},{"location":"status/#uptime-monitoring","title":"Uptime Monitoring","text":"<p>Here is a quick dashboard for the uptime monitoring meant to give an at the glance understanding which servers are up and running but do not give you detailed information about funcionality. </p> <p>Uptime Monitoring</p>"},{"location":"status/#integration-testing","title":"Integration Testing","text":"<p>These are detailed server status tests for functionality:</p> Server Status GNPS2 - Structure GNPS2 - Cytoscape GNPS2 - NP Classifier"},{"location":"status/#workflow-testing","title":"Workflow Testing","text":"<p>TODO: Add all the workflow testing monitoring</p>"},{"location":"toolindex/","title":"GNPS2 Tool Index","text":"<p>This is a global tool index for GNPS2. Throughout this documentation we have very detailed information for how to use way more tools than we though we'd have, but its a good problem to have!</p> <p>However, we recognize it might be difficult for people to simply see what all is availble in GNPS as tool and web services. This table is always evolving and hope to make it easier for people to navigate. </p> <p>Please help us fill in more completely!</p>"},{"location":"toolindex/#gnps2-web-tools","title":"GNPS2 Web Tools","text":"<p>These are web tools that is run by the GNPS2 team and provides complementary funcationality to GNPS2. </p> Tool Documentation Source Code Citation Pubmed Co-Authors List --- --- Nature Journals Author Quick Entry --- --- GNPS2 Spectral Similarity Hub --- --- GNPS2 Structure Server --- --- GNPS2 Cytoscape --- --- Metabolomics Spectrum Resolver Documentation GitHub Citation GNPS2 Networking URL Formatter --- --- GNPS2 Classical Networking Upset Plot Dashboard --- GitHub --- GNPS2 FBMN Upset Plot Dashboard --- --- NP Classifier --- GitHub --- GNPS2 Dashboard --- --- GNPS2 Plotter Dashboard (Beta) --- --- GNPS2 Dataset File Explorer (Beta) --- --- GNPS2 Public Libraries Download List --- --- GNPS2 Spectral Similarity Hub --- --- GNPS2 Tiny Mass Sharer --- --- GNPS2 MassQL Visualizer --- --- GNPS2 MassQL Analysis/Chatbot --- --- GNPS2 USI Playground --- --- GNPS2 Network Customization Playground --- ---"},{"location":"toolindex/#gnps2-jupyter-notebooks","title":"GNPS2 Jupyter Notebooks","text":"<p>These notebooks are for postprocessing of results from GNPS/GNPS2 and other computational processing that have not be integrated yet. If they are super useful, we can integrate into high throughput workflows. For now, give them a try!</p> Tool Documentation Source Code Binder Launch GNPS2 MASST Post Processing --- GitHub GNPS2 MassQL and Networking Integration --- GitHub GNPS2 Networking Family Consistent Fragmentation --- GitHub GNPS2 MassQL Post Processing --- GitHub CMMC Integration --- GitHub"},{"location":"toolindex/#community-tools-gnps2-interfaces-with","title":"Community Tools GNPS2 Interfaces with","text":"Tool Publication MS2LDA.org Citation NPAtlas Citation MIBiG Citation ClassyFire Citation SMART NMR Citation MassBank Citation Cytoscape Citation ProteoWizard Citation SNAP-MS Citation and Documentation"},{"location":"usi/","title":"GNPS2 USI","text":"<p>In GNPS2, you can also refer to spectra using the Universal Spectrum Identifier. The main resolver can be found at metabolomics-usi.gnps2.org. The format of the USI is as follows:</p> <pre><code>mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\n</code></pre> <p>You can also access the gnps2 native resolver at </p> <pre><code>https://gnps2.org/dashboards/embedded/resolver/\n</code></pre>"},{"location":"waters_conversion/","title":"Waters","text":"<p>Waters LCMS data conversion: an easy workflow to convert Waters raw data to open data formats</p> <p>Waters LCMS raw data can be converted into open data formats, such as mzML, following a simple workflow with only two main steps: 1) File conversion in DataConnect and 2) Scan renumbering using a GNPS2 workflow.</p> <p>1) File conversion in DataConnect (for Windows only):</p> <p>1.1. Waters files (.raw) are converted into mzML using DataConnect, available from the Waters MicroApps Website: https://microapps.on-demand.waters.com/home/showmarkdown/data-as-a-product. </p> <p>1.2. Follow instructions for downloading, installation and licensing found in the Release Notes: https://proddocuments.on-demand.waters.com/ReleaseNotes/Waters%20Tyne%20Bridge%20ReleaseNotes.pdf.</p> <p>1.3. Once DataConnect is properly installed, open it and click on Queue MassLynx tasks button. </p> <p>1.4. Choose the folder where the RAW files (.raw) are. Select the files on the Available RAWs window (left) and they will be moved to the Selected RAWs window (right), then click next.</p> <p>1.5. Select the lock mass compound on the top left box for mass correction. Use the defaults parameters, unless needed otherwise (on defatult Zlib compression, Write index and Centroid data using 2D peak peaking are checked). </p> <p>1.6. Choose your m/z compression size (32 or 64 bit), then click next. Choose your output path folder. Log level default is debug. Click export RAWs.</p> <p>1.7. You will be directed to the task queue window. The file conversion will start immediately or will be put into queue.</p> <p>1.8. Once the file conversion is complete, check in the output path folder, noting if the file size is around the expected size.</p> <p>1.9. Transfer the files into your GNPS2 profile, using ftp or sftp. Instructions for file upload can be found here: https://wang-bioinformatics-lab.github.io/GNPS2_Documentation/fileupload/</p> <p>2) Scan renumbering using a GNPS2 workflow. To correct the MS1 and MS2 scan numbering in the converted files, run the Agilent Workflow on the GNPS2 website.</p> <p>2.1. On GNPS2 website (gnps2.org) launch Agilent conversion workflow.</p> <p>2.2. Select files from your folder and submit workflow.</p> <p>2.3. Converted files can now be used in downstream analysis on the GNPS2 website or downloaded for other analysis.</p>"},{"location":"workflowdev/","title":"GNPS2 Workflow Development","text":""},{"location":"workflowdev/#overview-of-gnps2-workflow-development","title":"Overview of GNPS2 Workflow Development","text":"<p>Here is the template for GNPS2 Workflows, it provides boiler plate for NextFlow and the accompanying yaml files for input and display. There are several distinct steps that we would recommend:</p> <ol> <li>Make a new repository for the GNPS2 workflow that uses this template</li> <li>Make sure you can run the template by having conda and nextflow installed</li> <li>Run the test with <code>make run</code></li> <li>Once your workflow is how you like it in nextflow, you can hook everything up with the workflowinput.yaml file to define the input form. The specifics on each thing are below</li> <li>Update the workflow name so it is unique to your workflow in workflowinput.yaml</li> <li>Update the workflow name for results in workflowresults.yaml</li> <li>To deploy to Dev GNPS2 instance, send Ming your preferred username and public ssh key</li> <li>Prep deployment environment</li> <li>Deploy to GNPS2 Dev instance, see below on how to do that</li> </ol>"},{"location":"workflowdev/#defining-gnps2-workflow-input-yaml","title":"Defining GNPS2 Workflow Input YAML","text":"<p>For each workflow, there is a yml file called: workflowinput.yaml. It requires the following items:</p> <pre><code>workflowname: classic_networking\nworkflowdescription: LC - Classical Molecular Networking\nworkflowlongdescription: Molecular networks ...\nworkflowversion: \"0.1\"\nworkflowfile: workflows.nf\nworkflowautohide: false\nadminonly: true\nparameterlist:\n</code></pre>"},{"location":"workflowdev/#workflow-input-parameters","title":"Workflow Input Parameters","text":"<p>Text Entry</p> <pre><code>    - displayname: Precursor Ion Tolerance\n      paramtype: text\n      nf_paramname: precursor_mass_tolerance\n      formplaceholder: Enter the Precursor Ion Tolerance\n      formvalue: \"2.0\"\n      tooltip: \"Lorem Ipsum\"\n</code></pre> <p>Text Area</p> <pre><code>    - displayname: USI Entry\n      paramtype: textarea\n      nf_paramname: usi_field\n      formplaceholder: Enter USIs\n      formvalue: \"\"\n      rows: 4\n      cols: 50\n</code></pre> <p>Drop Down List</p> <pre><code>    - displayname: Network Generation Mode\n      paramtype: select\n      nf_paramname: cosinemode\n      formvalue: fast\n      options:\n        - value: python\n          display: python\n        - value: fast\n          display: fast\n      options-from-file: options.csv\n      options-from-url:\n        url: https://gnps-external.ucsd.edu/gnpslibrary\n        value-key: \"name\"\n        display-key: \"name\"\n</code></pre> <p>NOTE: For options-from-url, the API expects to return in json format, a list of dictionaries. Each dictionary will have the same keys, and the users can specify the value and display for the keys in the dropdown.</p> <p>Section Header</p> <pre><code>    - displayname: Advanced Network Options\n      paramtype: section\n</code></pre> <p>File Selector</p> <pre><code>    - displayname: Metadata Path\n      paramtype: fileselector\n      nf_paramname: metadata_filename\n      formplaceholder: Enter the path to metadata\n      formvalue: \"\"\n      targettaskfolder: metadata_folder\n      optional: true\n      selectsinglefile: false\n      folderunroll: true\n      linkdata: true\n</code></pre> <ol> <li>optional means that if nothing is selected, it will default the nextflow argument to NO_FILE</li> <li>selectsinglefile means that it will take the first selected file as the nextflow argument rather than the whole folder</li> <li>folderunroll means that we will file all the leaf files and symlink them into the target folder, false means we will simply link the select file or folder as is</li> <li>linkdata means that any linking will happen, by default on, but can turn off in cases where we simply want to specify files and not actually do anything with it beyond the name.</li> </ol>"},{"location":"workflowdev/#workflow-display-parameters","title":"Workflow Display Parameters","text":"<p>Pure Java Script Client Side Tables</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Serverside Tables (Medium Sized)</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable_server\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Serverside Tables (Large Sized - GB+ Size)</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable_serverbig\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;img src=\"https://structure.gnps2.org/structureimg?smiles=${row[\"smiles\"]}\"/&gt;\n        `;}}]'\n</code></pre> <p>Linkout</p> <pre><code>-   name: Downstream Analysis - Run Analysis\n    displayname: Downstream Analysis - Run Analysis\n    viewname: downstreamworkflow\n    displaytype: linkout\n    parameters:\n        baseurl: /workflowinput\n        urlparam:\n            -   workflowname:reanalysis_workflow\n        hashparam:\n            -   input_spectra:TASKLOCATION/[task]/input_spectra\n            -   description:Downstream from [task] Molecular Networking\n\n\n-   name: Visualize Heatmap\n    displayname: Visualize Heatmap\n    viewname: visualizeheatmap\n    displaytype: linkout\n    parameters:\n        baseurl: /taskresult/[task]/file/nf_output/output.html\n        urlparam:\n            -   attachment:no\n</code></pre> <p>Here if we want to use the task params in the linkout, simply use the syntax</p> <p><code>[@paramname]</code></p> <p>Download Files</p> <pre><code>-   name: Download PCoA\n    displayname: Download PCoA\n    viewname: poca\n    displaytype: download\n    parameters:\n        filename: pcoa/pcoa.qzv\n</code></pre> <p>Section Division</p> <pre><code>-   name: section\n    displayname: Summary Views\n    viewname: section\n    displaytype: section\n</code></pre>"},{"location":"workflowdev/#display-widgets","title":"Display Widgets","text":"<p>We can have little widgets to render in the table rows. To make them, you overwrite the columnDefs key. Here are a few examples.</p> <p>Spectrum Resolver Linkouts</p> <pre><code>'[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Structure Display</p> <pre><code>'[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;img src=\"https://structure.gnps2.org/structureimg?smiles=${row[\"smiles\"]}\"/&gt;\n        `;}}]'\n</code></pre>"},{"location":"workflowindex/","title":"GNPS2 Workflow Index","text":"<p>This is a workflow index for GNPS2. Throughout this documentation we have a small tutorial of the list of workflows listed https://gnps2.org/workflows The source code and the documentation of the tools will be linked at the beginning of each tool. </p> <p>The workflows are nextflow workflows that can be run independently in any server running nextflow. </p> <p>However, we recognize it might be difficult to keep this documentation up to date, so please help us fill in more completely! Edit online, submit the PR and we will review it!</p>"},{"location":"workflowindex/#gnps2-workflows","title":"GNPS2 Workflows","text":""},{"location":"workflowindex/#ms-ms-chooser","title":"MS-MS chooser","text":"<p>| Link | Source Code | Tool documentation | ---  |</p> <p>MSMS-Chooser is a GNPS2 workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library.  This specific step enables the finding of reference MS/MS spectra automatically in LC/MS data of pure standards given the structure of the pure standards. </p> <p>Input: Annotations file in .tsv format from MassIVE.  Spectra path containing a set of mzML/XML files.  tolerance: in ppm</p> <p>Output:  A .tsv file with the extracted information spectra from the molecule of interest. </p>"},{"location":"workflowindex/#feature-based-molecular-networking","title":"Feature-based Molecular Networking","text":"<p>| Link | --- | Tool documentation | ---  |</p>"},{"location":"workflowindex/#np-classifier","title":"NP-Classifier","text":"<p>| Link | Source Code | Tool documentation | ---  |</p>"},{"location":"workflowindex/#ms2lda","title":"MS2LDA","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"},{"location":"workflowindex/#chemwalker","title":"ChemWalker","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"},{"location":"workflowindex/#ms2query","title":"MS2query","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"},{"location":"workflowindex/#mshub-gc","title":"MSHub-gc","text":"<p>| Link | Source Code | Tool documentation | ---  |</p>"}]}