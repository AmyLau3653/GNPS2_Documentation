{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to GNPS2 Documentation","text":"<p>GNPS2 is a web-based mass spectrometry analysis platform. GNPS2 aids in identification and discovery of new molecules in small molecule and natural products mass spectrometry data. </p> <p>As there are many aspects to GNPS, it can be a bit overwhelming. Here is a quick description of main functionalities:</p> <ol> <li>Computational Workflows for the Analysis of Mass Spectrometry Data</li> <li>Interactive Visualizations of Mass Spectrometry Data and Results</li> <li>Mass Spectrometry Knowledgebase Curation</li> <li>Big Data Integration and Visualization</li> </ol>"},{"location":"accounts/","title":"Accounts","text":""},{"location":"accounts/#account-creation","title":"Account Creation","text":"<p>To create an account, you'll need to reach out to Ming for him to create them for you at the moment. GNPS2 is in slow closed beta to make sure everything is working properly and is slowly ramping up for community use. Thank you for your patience!</p>"},{"location":"api/","title":"GNPS2 API","text":""},{"location":"api/#chemicalstructurewebservice","title":"ChemicalStructureWebService","text":"<p>Web Server for Chemical Structure pictures as well as other chemical structure things</p>"},{"location":"api/#web-api-endpoints","title":"Web API Endpoints","text":"<p>Full resolution of all structural information conversion</p> <p><code>https://structure.gnps2.org/convert?smiles=CCO</code></p> <p>InChI Conversion</p> <p><code>https://structure.gnps2.org/inchi?smiles=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p> <p>InChIKey Conversion</p> <p><code>https://structure.gnps2.org/inchikey?smiles=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p> <p>Smiles Conversion</p> <p><code>https://structure.gnps2.org/inchikey?smiles=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Mol Conversion</p> <p><code>https://structure.gnps2.org/mol?smiles=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>ClassyFire</p> <p><code>https://structure.gnps2.org/classyfire?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Formula</p> <p><code>https://structure.gnps2.org/formula?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Structure Mass</p> <p><code>https://structure.gnps2.org/structuremass?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code> <code>https://structure.gnps2.org/structuremass?formula=C8H10N4O2</code></p> <p>Structure Fingerprint</p> <p><code>https://structure.gnps2.org/structurefingerprint?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Image Creation</p> <p><code>https://structure.gnps2.org/structureimg?inchi=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3</code></p> <p>Structure Similarity</p> <p><code>https://structure.gnps2.org/structuresimilarity?inchi1=InChI=1S/C8H10N4O2/c1-10-4-9-6-5(10)7(13)12(3)8(14)11(6)2/h4H,1-3H3&amp;smiles2=CN1C=NC2=C1C(=O)N(C(=O)N2C)C</code></p>"},{"location":"api/#public-dataset-files","title":"Public Dataset Files","text":"<p>Getting all files per dataset</p> <pre><code>https://explorer.gnps2.org/api/datasets/{accession}/files\n</code></pre> <p>Getting file path per USI</p> <pre><code>https://dashboard.gnps2.org/downloadlink?usi={file usi}\n</code></pre> <p>Getting spectrum data from Spectrum ID</p> <pre><code>https://external.gnps2.org/gnpsspectrum?SpectrumID={Spectrum ID}\n</code></pre>"},{"location":"chemwalker_doc/","title":"ChemWalker workflow documentation","text":"<p>Chemwalker is a tool published by R. da Silva lab to annotate features in metabolomic networks by propagating annotations on non-directly connected nodes by using MetFrag. The article is published here and the source code is available in github.  A detailed explanation of the tool is found below. </p>"},{"location":"chemwalker_doc/#quick-tutorial-of-chemwalker-workflow","title":"Quick tutorial of chemwalker workflow","text":""},{"location":"chemwalker_doc/#input","title":"Input","text":"Parameter Description Default Required Job Description Label for the ChemWalker job to identify it by the user no GNPS task ID GNPS molecular networking task id. Identify the task id of your FBMN job in GNPS2. See the links to the jobs in GNPS and GNPS2 yes Workflow type FBMN or Classic (V2) from GNPS and FBMN from GNPS2, named GNPS2. If the GNPS server is down, the chemwalker task will not work for FBMN or Classic (V2) since it needs to retrieve the data from GNPS. Analogously with GNPS2. Links GNPS2 yes Component Index Index of a connected component of interest in a Molecular Network. The propagation is limited to the connected component. Zero will perform propagation inside all components. yes Ionization mode Mass spectrometry acquisition mode. Positive yes Adduct ion type Expected adduct type for the precursor ion mass. It should be consistent with the ionization mode, otherwise the workflow will fail. [M+H]+ yes PPM tolerance (ppm) Accuracy used for structure database search. The predicted neutral mass (for a given adduct selected) is compared to the exact mass of the structures provided. 15 yes Structure databases The default natural products database is the COCONUT database or in house candidate structure database. See the Structure Database section COCONUT.psv yes <p>The fields are presented in the image. Bold fields are mandatory: </p>"},{"location":"chemwalker_doc/#links-to-task-ids","title":"Links to task ids","text":"<p>The information from the molecular network is necessary to annotate the nodes (features). For that, chemwalker needs the job id of the molecular network task. To view the task_id, check the red rectangle in the image. The task id can correspond to a GNPS2 Feature based molecular networking (FBMN), to a GNPS FBMN or a GNPS Molecular Networking v2. </p>"},{"location":"chemwalker_doc/#example-input","title":"Example Input","text":"# Information Value 1. Task description User label to identify the workflow task 2. GNPS2, FBMN, or FBMNv2 task id b6d12e1e42b64ad6b20e7d38d5a4214b 3. Workflow type (GNPS2, FBMN or V2) GNPS2 4. Component (Molecular family) index 11 5. File selection LIBRARYLOCATION/STRUCTURE/Chemwalker/COCONUT.psv"},{"location":"chemwalker_doc/#output","title":"Output","text":"# Item Description 1. Log Text area Text area with the result of the task. If there is some fail, the log will be written there. If the task failed and you want to contact the support team, please provide the output of this text area along with the job id. 2. Full results from the job Full results from the job. It can provide information to debug or to users with programming knowledge. 3. random walk structures.tsv File with the annotations over the nodes in the selected network/s. You can download to see the full fields or visit the online version. For a full analysis, the download of the file is recommended. 4. random walk structures.graphml Graphml with the annotations to visualize the nodes in Cytoscape. You can import this data file and dynamically analyze it there. <p>The different parts of the output are presented in the image: </p>"},{"location":"chemwalker_doc/#example-task","title":"Example task","text":"<p>To test the functionality of the ChemWalker workflow an Example task can be visited, and this work can be reproduced by clicking the clone button: </p> <p></p>"},{"location":"chemwalker_doc/#example-output","title":"Example output","text":"<p>The result of the task is the annotation of compounds from the chosen database according to the in-silico fragmentations calculated by MetFrag. The cluster index is the identification of the feature, the score is the associated score for the corresponding annotation for that specific feature. Results are sorted according to cluster index and score. The online results are not complete, it is recommended to download the full table. </p> <p> </p> <p>The user can download the graphml with the new nodes annotated by chem Walker, and now each node in the network contains the annotation calculated by ChemWalker. </p> <p> </p>"},{"location":"chemwalker_doc/#full-tutorial-of-chemwalker","title":"Full tutorial of ChemWalker","text":"<p>ChemWalker is a python package to propagate spectral library match identities through candidate structures provided by in silico fragmentation, using random walk.</p> <p></p> <p>Check out the package's documentation.</p>"},{"location":"chemwalker_doc/#structure-database","title":"Structure database","text":"<p>There are basically three options for database structure selection:</p> <ol> <li>The default natural products database is the COCONUT database. </li> <li>Input an in house generated database.  A standard format is required for the in house database. One can easily collect structures in the literature and format a tab separated files with SMILES strings and a character identifier of any kind, as the example database Right-click, and Save link as: </li> </ol> <p>Having an in house collection, the user has to first format the database, using the following webserver:</p> <p></p> <p>After submission for conversion the user should receive an email with the link to download a file in the following format Right-click, and Save link as:</p> <p></p>"},{"location":"chemwalker_doc/#chemwalker-visualization-in-cytoscape","title":"ChemWalker Visualization in Cytoscape","text":"<p>In a similar way as Molecular Networking uses Cytoscape to visualize the whole network, we can visualize structure prediction of entire connected component or networks using the output <code>Random walk strtuctures graphml</code> available at the results page.</p> <p>Cytoscape (we have used version &gt;= 3.4) is available for download from here. </p>"},{"location":"chemwalker_doc/#download-chemwalkers-cytoscape-files","title":"Download ChemWalker's Cytoscape files","text":"<p>To download the Cytoscape file, go back to the results page of your task:</p> <p></p> <p>After the download, remember to uncompress the file for downstream use.</p>"},{"location":"chemwalker_doc/#installing-the-chemviz-plugin","title":"Installing the ChemViz plugin","text":"<p>To visualize the structures on NAP output we need the ChemViz plugin. The easiest way to install it is using Cytoscape's App Manager, as shown below:</p> <p></p>"},{"location":"chemwalker_doc/#load-chemwalkers-cytoscape-file-and-apply-layout","title":"Load ChemWalker's Cytoscape file and apply layout","text":"<p>Load the graphml file and apply a layout to spread the nodes:</p> <p></p>"},{"location":"chemwalker_doc/#change-image-display-properties-and-paint-library-match-structure","title":"Change image display properties and paint library match structure","text":"<p>The graphml file contains some pre-set elements to aid structure display. Browsing the 'Table Panel' is possible to inspect which scoring method has structures available in the column SMILES. To use one of these columns to display the structures we have first to change the properties of ChemViz, by doing:</p> <p></p> <p>After setting the desired source column to display the structure one can just 'paint' the structure on the node:</p> <p></p>"},{"location":"chemwalker_doc/#display-the-list-of-candidates","title":"Display the list of candidates","text":"<p>The most correct structure may not be the first candidate. Therefore we can display the structures outputted from our initial parameters:</p> <p></p>"},{"location":"chemwalker_doc/#citation","title":"Citation","text":"<p>Tiago Cabral Borelli, Gabriel Santos Arini, Lu\u00eds G P Feitosa, Pieter C Dorrestein, Norberto Peporine Lopes, Ricardo R da Silva. Improving annotation propagation on molecular networks through random walks: introducing ChemWalker. Bioinformatics 2023, 39(3), btad078.</p>"},{"location":"chemwalker_doc/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"community/","title":"Join the GNPS2 community","text":"<p>The GNPS2 community is always welcoming suggestions and contributions. Be part of the community and contribute!</p>"},{"location":"community/#gnps-forum","title":"GNPS Forum","text":"<p>Discussions and suggestions can also take place on the GNPS/GNPS2 forum at https://groups.google.com/forum/#!forum/molecular_networking_bug_reports.</p>"},{"location":"community/#updating-the-gnps2-documentation-quick","title":"Updating the GNPS2 Documentation (Quick)","text":"<p>We'd love for the community to add, edit, and improve the documentation so it'll be even more helpful for everyone. You can even see all the contributors for each page at the bottom, so it's totally a community effort. To make things simpler, here is the step by step on how to edit the documentation. </p> <p>Make a GitHub Account </p> <p>You'll need to make a GitHub Account.</p> <p>Click Edit Button on Page You Want to Edit</p> <p></p> <p>Fork the Repository When Prompted (only the first time)</p> <p></p> <p>Make the Edits in MarkDown</p> <p></p> <p>Propose Changes</p> <p>Please describe the change you are making. </p> <p></p> <p>Create Pull Request</p> <p></p> <p>Finalize Pull Request with Description</p> <p></p>"},{"location":"community/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"contact/","title":"Contact/Office Hours","text":""},{"location":"contact/#gnps2-workflow-contact-information","title":"GNPS2 Workflow Contact information","text":"<p>If you have any questions about how to use GNPS2 please first ask the community at the GNPS forum located here.</p>"},{"location":"contact/#gnps2-office-hours","title":"GNPS2 Office Hours","text":"<p>We are hosting online office hours on a weekly basis online with Ming (mingxun.wang@cs.ucr.edu, Lab Website) via Zoom:</p> <p>https://ucr.zoom.us/j/98049645231</p> <p>In office hours we'll cover new and old features of GNPS2 and most importantly we'll take your personal questions about GNPS2, computational mass spectrometry, and any science you want to chat about! We'll start office hours given the time below and keep going until there are no more questions. If office hours get too busy, we will limit each question to 10 min.  </p> <p>Upcoming Office Hour Schedule</p> Date/Time Subjects Covered 9AM PST (6PM CET) Weekly on Monday Interactive Office Hours <p>Please also take the time to RSVP that you're going to attend and what questions you may have so we know who to let in as well as what to expect and the order to address (you will not receive a confirmation from this RSVP, just show up to office hours once you add it):</p> Loading\u2026"},{"location":"contact/#page-contributions","title":"Page Contributions","text":"<p>{{ git_page_authors }}</p>"},{"location":"fileconversion/","title":"Mass Spec File Conversion","text":"<p>Supported Formats at GNPS2</p> <p>GNPS2 supports mzXML, mzML, and mgf formats for analysis. Our tools do NOT support mzData, xml, raw, RAW, wiff, scan, d, and cdf formats. If some of your files are in these formats, please use the following guide to convert them to open formats supported by GNPS2.</p>"},{"location":"fileconversion/#data-conversion-super-easy","title":"Data Conversion (Super Easy)","text":"<p>Drag and drop files on our server here and hit convert. </p> <p>You will receive a download of all the converted files in a zip file that is ready to be analyzed! </p>"},{"location":"fileconversion/#data-conversion-easy","title":"Data Conversion (Easy)","text":"<p>This is a complete package for Windows users to convert their vendor formats to GNPS compatible format (mzML or legacy mzXML). It is as easy as putting files into a folder and batch converting them all without any installation (well nearly so).</p> <ol> <li>Download the zip file here</li> <li>Unzip contents onto a folder on your computer (e.g. Desktop)</li> <li>Install windows libraries in \"pwizLibraries-and-Installation\" - Run appropriate program for 32-bit (32-Bit_Double-Click_To_Install.bat) or 64-bit system (64-Bit_Double-Click_To_Install.bat). To find out which type of OS you have please check here</li> <li>Put vendor formats in \"Input_Files\" not embedded in other folders</li> <li>Double click on Double-Click_To-Convert.bat - Download zip includes demo files for major vendor formats as a test.</li> <li>Wait patiently</li> <li>Check all the converted files in Output_Folder</li> <li>If there are errors, please check log.txt or read on how to convert files in a more traditional manner.</li> </ol>"},{"location":"fileconversion/#data-conversion-traditional","title":"Data Conversion (Traditional)","text":"<p>The .mzXML or .mzML formats are strongly preferred and will be discussed below.</p> Vendor Instrument Software File Format Recommended Converter Notes AB Sciex Analyst .wiff MSConvert verified Agilent MassHunter .d MSConvert verified (with issues with scan number export) Bruker DataAnalysis/Compass .d CompassXport This conversion is through the DataAnalysis software ThermoFisher Xcalibur .raw/.RAW MSConvert verified Waters MassLynx .raw MSConvert is for full scan/DDA datasets. Symphony is for other modes such as MSe/SONAR/HDMSe/HD-DDA See more informations about the procedure in this Water Technology Brief Shimadzu .lcd MSConvert <p>For problems with MSConvert, please contact the ProteoWizard developers.</p> <p>If you are a vendor and think there are better methods to convert your files to work with GNPS2, let us know by contacting us.</p>"},{"location":"fileconversion/#conversion-with-msconvert","title":"Conversion with MSConvert","text":"<p>Download and install ProteoWizard from here.</p> <p>Info</p> <p>Make sure to choose a Windows-compatible version (includes vendor reader support). You must also have .NET Framework 3.5 SP1 and 4.0 installed.</p> <p>After installation, from the Start Menu, click the ProteoWizard folder and open MSConvert.</p> <ul> <li> <p>Click Browse and select file(s) for conversion. Then click Add to add them to the MSConvert workflow.</p> </li> <li> <p>Choose an Output Directory</p> </li> <li> <p>Under Options, choose mzML (prefered) or mzXML for output format, 32-bit for binary encoding precision and uncheck Use zlib compression.</p> </li> <li> <p>Under filters, choose Peak Picking with Vendor checked, in order to centroid the data. Indicate MS-Levels 1-2. Click Add to add the filter.</p> </li> </ul> <p>???+ danger Peak Peaking Filter Order     Make sure the PeakPicking filter is the first filter in the list (top position), otherwise the conversion will not be centroided!     </p> <ul> <li> <p>Save the parameters for the next conversion. This will save you some time and prevent misconfiguration. In Presets (left bottom), click on Save Presets, and select \"Save as default for the format\".</p> </li> <li> <p>Click on Start.  Check your folder for the new .mzML/.mzXML files. Verify that these files open properly in Insilicos or TOPP View (OpenMS).</p> </li> </ul>"},{"location":"fileconversion/#page-contributors","title":"Page Contributors","text":"<p>{{ git_page_authors }}</p>"},{"location":"fileupload/","title":"File Upload","text":""},{"location":"fileupload/#browser-file-uploads","title":"Browser File Uploads","text":"<p>Go ahead and login and click the \"File Broswer\" in the top right. You will be able to drag and drop. However, be warned that you cannot upload files directly to the root of your user. You will need to make a new folder first. </p>"},{"location":"fileupload/#sftp-file-uploads","title":"SFTP File Uploads","text":"<p>You can access the SFTP file upload with the following information</p> Field Value hostname sftp.gnps2.org port 6542 <p>You can login with your GNPS2 username and password. </p> <p>NOTE: This is currently in beta and not all accounts are activated on the SFTP server. </p> <p>Here is a one-liner if you like using the commandline for uploading a folder</p> <pre><code>sftp -P 6542 &lt;username&gt;@sftp.gnps2.org:/ &lt;&lt;&lt; $'put -r &lt;folder name&gt;'\n</code></pre> <p>If you want to mirror a lot of data periodically, use this command:</p> <pre><code>lftp -e \"mirror --parallel=4 --include '/*.mzML' -R $local_directory $remote_directory; quit\" -u \"$remote_user,$password\" sftp://$remote_host:$remote_port\n</code></pre>"},{"location":"fileupload/#ftp-file-uploads","title":"FTP File Uploads","text":"<p>If you want to upload with FTP because SFTP is blocked or has issues at your institution or computer, you can use the following information</p> Field Value hostname ftp.gnps2.org port 6541"},{"location":"idbac/","title":"IDBac Database Submission and Analysis","text":""},{"location":"idbac/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p>","text":""},{"location":"idbac/#idbac-workflows-require-a-mzml-file-format-for-guidance-on-how-to-convert-raw-data-or-mzxml-to-mzml-see-the-tabs-to-the-left","title":"*IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.","text":"<p>## 1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzmL files, plate map and metadata sheet.</p> <p></p> <p></p>"},{"location":"idbac/#3-split-re-name-autoexecute-file","title":"3) Split re-name autoexecute file <p>This workflow will split your autoexecute data into individually labeled mzML files based on your plate map and well positions. </p> <p>i) Open the idbac_split_maldi workflow</p> <p>ii) Select your autoExecute mzML and plate map from the drop down menu.</p> <p>iii) Submit workflow.</p> <p></p>","text":""},{"location":"idbac/#4-choose-what-you-would-like-to-do-next","title":"4) Choose what you would like to do next: <p>a) IDBac Analysis: Analyze spectra within your dataset indepedently, or compare against the IDBac protein database (See \"Analysis options\" below).</p> <p>b) IDBac Protein Database Deposition: Deposit metadata and spectra of genetically verified isolates into the IDBac database.</p> <p></p>","text":""},{"location":"idbac/#a-idbac-analysis","title":"a) IDBac Analysis <p>Submit workflow: Select idbac_analysis_workflow and reference the following image for submission instructions. <p>*If you do not submit metadata during this step, you will have fewer analysis options.</p> <p></p> <p>Analysis options: Once the idbac_analysis_workflow is complete, you have the ability to analyze your data through: <p>i) Vizualize protein dendrogram: View a dendrogram of your isolates (excluding database seeds). </p> <p>ii) Visualize with Metadata: If you selected a metadata column to display, it will appear within this protein dendrogram. If you do not select a metadata column to display, a 500 server error will display on-screen should you choose this analysis.</p> <p>iii) Spectra summary: This option allows you to compare mirror plots of your spectra.</p> <p>iv) Dendrogram similarity: You may view similarity scores between your isolates based on the similarity metric you chose in the analysis workflow submission.</p> <p>v) Database Search Summary: Here you query protein spectra of your unknown isolate against our database of characterized bacterial strains (based on similairty scores).</p> <p></p>","text":""},{"location":"idbac/#b-idbac-database-deposition","title":"b) IDBac Database Deposition <p>Submit workflow: Select idbacdeposition_workflow and reference the following image for deposition instructions. <p></p> <p>View Database <p>To view your deposition, visit the IDBac Knowledgebase.</p>","text":""},{"location":"idbacanalysis/","title":"IDBac Analysis","text":""},{"location":"idbacanalysis/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p>","text":""},{"location":"idbacanalysis/#idbac-workflows-require-a-mzml-file-format-for-guidance-on-how-to-convert-raw-data-or-mzxml-to-mzml-see-the-tabs-to-the-left","title":"IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.","text":"<p>## 1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzmL files, plate map and metadata sheet.</p> <p></p> <p></p>"},{"location":"idbacanalysis/#2-submit-workflow","title":"2) Submit workflow: <p>Select idbac_analysis_workflow and reference the following image for submission instructions.</p> <p>If you do not submit metadata during this step, you will have fewer analysis options.</p> <p></p> <p>Analysis options: Once the idbac_analysis_workflow is complete, you have the ability to analyze your data through: <p>i) Vizualize protein dendrogram: View a dendrogram of your isolates (excluding database seeds). </p> <p>ii) Visualize with Metadata: If you selected a metadata column to display, it will appear within this protein dendrogram. If you do not select a metadata column to display, a 500 server error will display on-screen should you choose this analysis.</p> <p>iii) Spectra summary: This option allows you to compare mirror plots of your spectra.</p> <p>iv) Dendrogram similarity: You may view similarity scores between your isolates based on the similarity metric you chose in the analysis workflow submission.</p> <p>v) Database Search Summary: Here you query protein spectra of your unknown isolate against our database of characterized bacterial strains (based on similairty scores).</p> <p></p>","text":""},{"location":"idbacdepositions/","title":"IDBac Database Deposition","text":""},{"location":"idbacdepositions/#idbac-templates","title":"IDBac Templates <p>MALDI Plate Map</p> <p>Metadata Sheet</p>","text":""},{"location":"idbacdepositions/#idbac-workflows-require-a-mzml-file-format-for-guidance-on-how-to-convert-raw-data-or-mzxml-to-mzml-see-the-tabs-to-the-left","title":"IDBac workflows require a mzML file format. For guidance on how to convert raw data or mzXML to mzML, see the tabs to the left.","text":"<p>## 1) Upload mzML files to GNPS2.org <p>i) Select \"File Browser\" found on the GNPS2.org homepage. <p>ii) Create a new folder and upload your mzmL files, plate map and metadata sheet.</p> <p></p> <p></p>"},{"location":"idbacdepositions/#2-submit-workflow-select-idbacdeposition_workflow-and-reference-the-following-image-for-deposition-instructions","title":"2) Submit workflow: Select idbacdeposition_workflow and reference the following image for deposition instructions.  <p>View Database <p>To view your deposition, visit the IDBac Knowledgebase.</p>","text":""},{"location":"idbacmzxmlconversion/","title":"Convert mzXML to mzML","text":""},{"location":"idbacmzxmlconversion/#1-upload-mzxml-files-to-gnps2org","title":"1) Upload mzXML files to GNPS2.org","text":"<p>i) Select \"File Browser\" found on the GNPS2.org homepage.</p> <p>ii) Create a new folder and upload the mzXML files that need conversion. </p> <p> </p>"},{"location":"idbacmzxmlconversion/#2-run-the-msconvert_workflow","title":"2) Run the msconvert_workflow  <p>i) Select the mzXML files that you would like to convert to mzML from the drop down menu.</p> <p>ii) Submit workflow.</p> <p>iii) The output of this workflow is individual mzML files that can be used in downstream IDBac analysis or database depositions. </p> <p></p>","text":""},{"location":"idbacrawconversion/","title":"1) Convert raw Bruker data to mzML via MSConvert.","text":""},{"location":"idbacrawconversion/#open-msconvert-and-proceed-to-the-following-steps","title":"Open MSConvert and proceed to the following steps.","text":"<p>i) Select your Bruker FID file(s) by clicking 'Browse'.</p> <p>ii) Click 'Add' to submit your file to the conversion cue.</p> <p>iii) Select where you would like your file to be saved under \"Output Directory\".</p> <p>iv) Ensure mzML is selected under 'Options/Output format'.</p> <p>v) When the previous steps are completed, click 'Start'.</p> <p>vi) The output of this conversion will be a single autoexecute mzML for the entire plate or single mzML files for each MALDI TOF well. These files can be re-named and merged \"Idbac_split_maldi_workflow\" section below).</p> <p></p> <p></p> <p></p>"},{"location":"idbacrawconversion/#2-upload-mzml-files-to-gnps2org","title":"2) Upload mzML files to GNPS2.org","text":"<p>i) Select \"File Browser\" found on the GNPS2.org homepage.</p> <p>ii) Create a new folder and upload your converted files.</p> <p></p> <p></p>"},{"location":"idbacrawconversion/#3-split-re-name-autoexecute-file","title":"3) Split re-name autoexecute file","text":"<p>For Autoexecute mzML: This workflow will split your autoexecute data into individually labeled mzML files based on your plate map and well positions.</p> <p>For manual collection mzML: This workflow will re-name your mzML files based on your plate map and well positions</p> <p>i) Open the idbac_split_maldi workflow</p> <p>ii) Select your autoExecute mzML and plate map from the drop down menu.</p> <p>iii) Submit workflow.</p> <p></p>"},{"location":"idbacrawconversion/#4-choose-what-you-would-like-to-do-next","title":"4) Choose what you would like to do next: <p>a) IDBac Analysis: Analyze spectra within your dataset indepedently, or compare against the IDBac protein database (See \"Analysis options\" below).</p> <p>b) IDBac Protein Database Deposition: Deposit metadata and spectra of genetically verified isolates into the IDBac database.</p> <p></p>","text":""},{"location":"status/","title":"Server Status","text":"<p>Here we can see the status of the GNPS2 Infrastructure ecosystem. </p>"},{"location":"status/#uptime-monitoring","title":"Uptime Monitoring","text":"<p>Here is a quick dashboard for the uptime monitoring meant to give an at the glance understanding which servers are up and running but do not give you detailed information about funcionality. </p> <p>Uptime Monitoring</p>"},{"location":"status/#integration-testing","title":"Integration Testing","text":"<p>These are detailed server status tests for functionality:</p> Server Status GNPS2 - Structure GNPS2 - Cytoscape GNPS2 - NP Classifier"},{"location":"status/#workflow-testing","title":"Workflow Testing","text":"<p>TODO: Add all the workflow testing monitoring</p>"},{"location":"toolindex/","title":"GNPS2 Tool Index","text":"<p>This is a global tool index for GNPS2. Throughout this documentation we have very detailed information for how to use way more tools than we though we'd have, but its a good problem to have!</p> <p>However, we recognize it might be difficult for people to simply see what all is availble in GNPS as tool and web services. This table is always evolving and hope to make it easier for people to navigate. </p> <p>Please help us fill in more completely!</p>"},{"location":"toolindex/#gnps2-web-tools","title":"GNPS2 Web Tools","text":"<p>These are web tools that is run by the GNPS2 team and provides complementary funcationality to GNPS2. </p> Tool Documentation Source Code Citation Pubmed Co-Authors List --- --- Nature Journals Author Quick Entry --- --- GNPS2 Spectral Similarity Hub --- --- GNPS2 Structure Server --- --- GNPS2 Cytoscape --- --- Metabolomics Spectrum Resolver Documentation GitHub Citation GNPS2 Networking URL Formatter --- --- GNPS2 Classical Networking Upset Plot Dashboard --- GitHub --- GNPS2 FBMN Upset Plot Dashboard --- --- NP Classifier --- GitHub --- GNPS2 Dashboard --- --- GNPS2 Plotter Dashboard (Beta) --- --- GNPS2 Dataset File Explorer (Beta) --- --- GNPS2 Public Libraries Download List --- --- GNPS2 Spectral Similarity Hub --- --- GNPS2 Tiny Mass Sharer --- ---"},{"location":"toolindex/#gnps2-jupyter-notebooks","title":"GNPS2 Jupyter Notebooks","text":"<p>These notebooks are for postprocessing of results from GNPS/GNPS2 and other computational processing that have not be integrated yet. If they are super useful, we can integrate into high throughput workflows. For now, give them a try!</p> Tool Documentation Source Code Binder Launch GNPS2 MASST Post Processing --- GitHub GNPS2 MassQL and Networking Integration --- GitHub GNPS2 Networking Family Consistent Fragmentation --- GitHub GNPS2 MassQL Post Processing --- GitHub CMMC Integration --- GitHub"},{"location":"toolindex/#community-tools-gnps2-interfaces-with","title":"Community Tools GNPS2 Interfaces with","text":"Tool Publication MS2LDA.org Citation NPAtlas Citation MIBiG Citation ClassyFire Citation SMART NMR Citation MassBank Citation Cytoscape Citation ProteoWizard Citation SNAP-MS Citation and Documentation"},{"location":"usi/","title":"GNPS2 USI","text":"<p>In GNPS2, you can also refer to spectra using the Universal Spectrum Identifier. The main resolver can be found at metabolomics-usi.gnps2.org. The format of the USI is as follows:</p> <pre><code>mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\n</code></pre> <p>You can also access the gnps2 native resolver at gnps2.org/dashboards/embedded/resolver/</p>"},{"location":"workflowdev/","title":"GNPS2 Workflow Development","text":""},{"location":"workflowdev/#overview-of-gnps2-workflow-development","title":"Overview of GNPS2 Workflow Development","text":"<p>Here is the template for GNPS2 Workflows, it provides boiler plate for NextFlow and the accompanying yaml files for input and display. There are several distinct steps that we would recommend:</p> <ol> <li>Make a new repository for the GNPS2 workflow that uses this template</li> <li>Make sure you can run the template by having conda and nextflow installed</li> <li>Run the test with <code>make run</code></li> <li>Once your workflow is how you like it in nextflow, you can hook everything up with the workflowinput.yaml file to define the input form. The specifics on each thing are below</li> <li>Update the workflow name so it is unique to your workflow in workflowinput.yaml</li> <li>Update the workflow name for results in workflowresults.yaml</li> <li>To deploy to Dev GNPS2 instance, send Ming your preferred username and public ssh key</li> <li>Prep deployment environment</li> <li>Deploy to GNPS2 Dev instance, see below on how to do that</li> </ol>"},{"location":"workflowdev/#defining-gnps2-workflow-input-yaml","title":"Defining GNPS2 Workflow Input YAML","text":"<p>For each workflow, there is a yml file called: workflowinput.yaml. It requires the following items:</p> <pre><code>workflowname: classic_networking\nworkflowdescription: LC - Classical Molecular Networking\nworkflowlongdescription: Molecular networks ...\nworkflowversion: \"0.1\"\nworkflowfile: workflows.nf\nworkflowautohide: false\nadminonly: true\nparameterlist:\n</code></pre>"},{"location":"workflowdev/#workflow-input-parameters","title":"Workflow Input Parameters","text":"<p>Text Entry</p> <pre><code>    - displayname: Precursor Ion Tolerance\n      paramtype: text\n      nf_paramname: precursor_mass_tolerance\n      formplaceholder: Enter the Precursor Ion Tolerance\n      formvalue: \"2.0\"\n      tooltip: \"Lorem Ipsum\"\n</code></pre> <p>Text Area</p> <pre><code>    - displayname: USI Entry\n      paramtype: textarea\n      nf_paramname: usi_field\n      formplaceholder: Enter USIs\n      formvalue: \"\"\n      rows: 4\n      cols: 50\n</code></pre> <p>Drop Down List</p> <pre><code>    - displayname: Network Generation Mode\n      paramtype: select\n      nf_paramname: cosinemode\n      formvalue: fast\n      options:\n        - value: python\n          display: python\n        - value: fast\n          display: fast\n      options-from-file: options.csv\n      options-from-url:\n        url: https://gnps-external.ucsd.edu/gnpslibrary\n        value-key: \"name\"\n        display-key: \"name\"\n</code></pre> <p>NOTE: For options-from-url, the API expects to return in json format, a list of dictionaries. Each dictionary will have the same keys, and the users can specify the value and display for the keys in the dropdown.</p> <p>Section Header</p> <pre><code>    - displayname: Advanced Network Options\n      paramtype: section\n</code></pre> <p>File Selector</p> <pre><code>    - displayname: Metadata Path\n      paramtype: fileselector\n      nf_paramname: metadata_filename\n      formplaceholder: Enter the path to metadata\n      formvalue: \"\"\n      targettaskfolder: metadata_folder\n      optional: true\n      selectsinglefile: false\n      folderunroll: true\n      linkdata: true\n</code></pre> <ol> <li>optional means that if nothing is selected, it will default the nextflow argument to NO_FILE</li> <li>selectsinglefile means that it will take the first selected file as the nextflow argument rather than the whole folder</li> <li>folderunroll means that we will file all the leaf files and symlink them into the target folder, false means we will simply link the select file or folder as is</li> <li>linkdata means that any linking will happen, by default on, but can turn off in cases where we simply want to specify files and not actually do anything with it beyond the name.</li> </ol>"},{"location":"workflowdev/#workflow-display-parameters","title":"Workflow Display Parameters","text":"<p>Pure Java Script Client Side Tables</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Serverside Tables (Medium Sized)</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable_server\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Serverside Tables (Large Sized - GB+ Size)</p> <pre><code>-   name: Results\n    displayname: Results\n    viewname: results\n    displaytype: datatable_serverbig\n    parameters:\n        filename: library/results.tsv\n        error_missingfile: \"No File\"\n        columns:\n            -   title: \"Visualize\"\n                data: \n            -   title: \"SpecFile\"\n                data: filename\n        columnDefs: '[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;img src=\"https://structure.gnps2.org/structureimg?smiles=${row[\"smiles\"]}\"/&gt;\n        `;}}]'\n</code></pre> <p>Linkout</p> <pre><code>-   name: Downstream Analysis - Run Analysis\n    displayname: Downstream Analysis - Run Analysis\n    viewname: downstreamworkflow\n    displaytype: linkout\n    parameters:\n        baseurl: /workflowinput\n        urlparam:\n            -   workflowname:reanalysis_workflow\n        hashparam:\n            -   input_spectra:TASKLOCATION/[task]/input_spectra\n            -   description:Downstream from [task] Molecular Networking\n\n\n-   name: Visualize Heatmap\n    displayname: Visualize Heatmap\n    viewname: visualizeheatmap\n    displaytype: linkout\n    parameters:\n        baseurl: /taskresult/[task]/file/nf_output/output.html\n        urlparam:\n            -   attachment:no\n</code></pre> <p>Here if we want to use the task params in the linkout, simply use the syntax</p> <p><code>[@paramname]</code></p> <p>Download Files</p> <pre><code>-   name: Download PCoA\n    displayname: Download PCoA\n    viewname: poca\n    displaytype: download\n    parameters:\n        filename: pcoa/pcoa.qzv\n</code></pre> <p>Section Division</p> <pre><code>-   name: section\n    displayname: Summary Views\n    viewname: section\n    displaytype: section\n</code></pre>"},{"location":"workflowdev/#display-widgets","title":"Display Widgets","text":"<p>We can have little widgets to render in the table rows. To make them, you overwrite the columnDefs key. Here are a few examples.</p> <p>Spectrum Resolver Linkouts</p> <pre><code>'[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;a target=\"_blank\" href=\"https://metabolomics-usi.gnps2.org/dashinterface/?usi1=mzspec:GNPS2:TASK-${task}-input_file_folder/${row[\"filename\"]}:scan:${row[\"scan1\"]}\"&gt;View Spectrum&lt;/a&gt;\n        `;}}]'\n</code></pre> <p>Structure Display</p> <pre><code>'[ {\"targets\": 0,\"data\": null,\"render\": function ( data, type, row, meta ) {\n        return `\n            &lt;img src=\"https://structure.gnps2.org/structureimg?smiles=${row[\"smiles\"]}\"/&gt;\n        `;}}]'\n</code></pre>"},{"location":"workflowindex/","title":"GNPS2 Workflow Index","text":"<p>This is a workflow index for GNPS2. Throughout this documentation we have a small tutorial of the list of workflows listed https://gnps2.org/workflows The source code and the documentation of the tools will be linked at the beginning of each tool. </p> <p>The workflows are nextflow workflows that can be run independently in any server running nextflow. </p> <p>However, we recognize it might be difficult to keep this documentation up to date, so please help us fill in more completely! Edit online, submit the PR and we will review it!</p>"},{"location":"workflowindex/#gnps2-workflows","title":"GNPS2 Workflows","text":""},{"location":"workflowindex/#ms-ms-chooser","title":"MS-MS chooser","text":"<p>| Link | Source Code | Tool documentation | ---  |</p> <p>MSMS-Chooser is a GNPS2 workflow and open-source protocol to empower the community to collect MS/MS reference data and contribute to the public MS/MS reference library.  This specific step enables the finding of reference MS/MS spectra automatically in LC/MS data of pure standards given the structure of the pure standards. </p> <p>Input: Annotations file in .tsv format from MassIVE.  Spectra path containing a set of mzML/XML files.  tolerance: in ppm</p> <p>Output:  A .tsv file with the extracted information spectra from the molecule of interest. </p>"},{"location":"workflowindex/#feature-based-molecular-networking","title":"Feature-based Molecular Networking","text":"<p>| Link | --- | Tool documentation | ---  |</p>"},{"location":"workflowindex/#np-classifier","title":"NP-Classifier","text":"<p>| Link | Source Code | Tool documentation | ---  |</p>"},{"location":"workflowindex/#ms2lda","title":"MS2LDA","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"},{"location":"workflowindex/#chemwalker","title":"ChemWalker","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"},{"location":"workflowindex/#ms2query","title":"MS2query","text":""},{"location":"workflowindex/#link-source-code-tool-documentation-citation","title":"| Link | Source Code | Tool documentation | Citation  |","text":"<p>| Link | Source Code | Tool documentation | Citation  |</p>"}]}